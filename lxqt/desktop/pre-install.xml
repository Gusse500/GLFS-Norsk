<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;
]>

<sect1 id="lxqt-pre-install" xreflabel="LXQt Pre-Install">
  <?dbhtml filename="pre-install.html"?>

  <title>LXQt Desktop Pre-Install Instructions</title>

  <indexterm zone="lxqt-pre-install">
    <primary sortas="g-lxqt-pre-install">LXQt Pre-Install</primary>
  </indexterm>
  <sect2>
    <title>Notes about building LXQt dependencies</title>

    <para>
      <application>LXQt</application> obviously needs <xref linkend="qt5"/>,
      but not all Qt5 modules and dependencies are necessary. Since the aim
      of <application>LXQt</application> is to be light weight, it is possible 
      to cut down the Qt5 overhead, and to build only parts of it.
      
    </para>

    <procedure>
      <step>
        <para>
          Build <xref linkend="linux-pam"/>, <xref linkend="shadow"/>,
          <xref linkend="libpwquality"/>, and <xref linkend="sudo"/>, with
          their dependencies.
        </para>
      </step>

      <step>
        <para>
          Build the whole <xref linkend="x-window-system"/> chapter, including
          Wayland support and xcb-utils-xxx packages, with required and
          recommended dependencies, and replacing twm vith
          <xref linkend="openbox"/> (and its required dependencies). Some Xorg
          applications and fonts may be omitted, but with a negligible impact
          on build time and size.
        </para>
      </step>

      <step>
        <para>
          Build some of the recommended Qt dependencies, namely:
          <xref linkend="double-conversion"/>,
          <xref linkend="libjpeg"/>,
          <xref linkend="libxkbcommon"/>, and
          <xref linkend="sqlite"/>.
        </para>
      </step>

      <step>
        <para>
          Build the required parts of <xref linkend="qt5"/>. To skip all
          modules but the those needed for LXQt, do:
        </para>
<screen role="nodump"><userinput>ls -Fd qt* | grep / | sed 's/^/-skip /;s@/@@' > tempconf
sed -ir '/base|tools|x11extras|svg|declarative|wayland/d' tempconf
./configure &lt;book flags&gt; $(cat tempconf)</userinput></screen>
        <para>
          The time needed to complete the Qt installation is thus reduced to
          around 11 SBU.
        </para>
      </step>

      <step>
        <para>
          Build miscellaneous dependencies (with their required ones):
          <xref linkend="json-glib"/>,
          <xref linkend="libexif"/>,
          <xref linkend="libstatgrab"/>,
          <xref linkend="lm_sensors"/>,
          <xref linkend="menu-cache"/>,

          <phrase revision="sysv">
            <xref linkend="pm-utils"/>,
          </phrase>

          <xref linkend="alsa-lib"/>,<!--recommended for pulseaudio, so has to
          be here since we tell to build only required dependencies.-->
          <xref linkend="polkit"/>,
          <xref linkend="pulseaudio"/>, and
          <xref linkend="upower"/>.
        </para>
      </step>

      <step>
        <para>
          Build KDE frameworks dependencies:
          <xref linkend="extra-cmake-modules"/>,
          <xref linkend="libdbusmenu-qt"/>,
          <xref linkend="plasma-wayland-protocols"/>, and
          <xref linkend="polkit-qt"/>.
        </para>
      </step>

      <step>
        <para>
          Finally, build some desktop utilities:
          <xref linkend="breeze-icons"/> or other sets of icons,
          <xref linkend="hicolor-icon-theme"/>,
          <xref linkend="desktop-file-utils"/> (needed to update the
          desktop database),
          <xref linkend="shared-mime-info"/> (needed to update the mime
          database),
          <xref linkend="xdg-utils"/> (needs only xmlto), and
          <xref linkend="xdg-user-dirs"/>.
        </para>
      </step>
    </procedure>

  </sect2>

</sect1>
